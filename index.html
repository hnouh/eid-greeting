<!DOCTYPE html>
<html lang="ar">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ÿ®ÿ∑ÿßŸÇÿ© ÿ™ŸáŸÜÿ¶ÿ© ÿ®ÿπŸäÿØ ÿßŸÑÿ≠ÿ¨</title>
    <script>
      console.log("ÿßŸÑÿ≥ŸÉÿ±Ÿäÿ®ÿ™ ŸäÿπŸÖŸÑ ‚úÖ");
      const canvas = document.getElementById("greetingCanvas");
      const ctx = canvas.getContext("2d");
      const image = new Image();
      image.crossOrigin = "anonymous";
      image.src =
        "https://raw.githubusercontent.com/hnouh/eid-greeting/main/Alesayi%20greeting.jpg"; //  ÿµŸàÿ±ÿ© ÿßŸÑŸÇÿßŸÑÿ®
      image.onload = () =>
        ctx.drawImage(image, 0, 0, canvas.width, canvas.height);

      const audio = document.getElementById("takbeerat");
      let audioStarted = false;

      function startAudioOnce() {
        if (!audioStarted) {
          audio.play().catch(() => {});
          audioStarted = true;
          document.getElementById("muteBtn").innerText = "üîä";
        }
      }

      function generateCard() {
        const nameAr = document.getElementById("nameAr").value.trim();
        const nameEn = document.getElementById("nameEn").value.trim();

        // ÿ•ÿπÿßÿØÿ© ÿ±ÿ≥ŸÖ ÿßŸÑÿÆŸÑŸÅŸäÿ©
        ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#00000";
        ctx.textAlign = "center";
        // ctx.shadowColor = "#000";
        // ctx.shadowBlur = 4;

        // ÿßŸÑŸÖÿ≥ÿßŸÅÿ© ÿßŸÑÿ±ÿ£ÿ≥Ÿäÿ© ÿßŸÑÿ≥ŸÅŸÑŸäÿ© ŸÖŸÜ ÿ£ÿ≥ŸÅŸÑ ÿßŸÑÿ®ÿ∑ÿßŸÇÿ©
        let y = canvas.height - 350;

        if (nameAr) {
          ctx.font = "60px 'ArbFONTS-GE-Flow'"; // ÿÆÿ∑ ŸÉÿ®Ÿäÿ± ŸäŸÜÿßÿ≥ÿ® ÿßŸÑÿØŸÇÿ© ÿßŸÑÿπÿßŸÑŸäÿ©
          ctx.fillText(`${nameAr}`, canvas.width / 2, y);
          y += 75; // ŸÖÿ≥ÿßŸÅÿ© ÿ®ŸäŸÜ ÿßŸÑÿ≥ÿ∑ÿ±ŸäŸÜ
        }

        if (nameEn) {
          ctx.font = "56px 'FuturaPT'";
          ctx.fillText(`${nameEn}`, canvas.width / 2, y);
        }
        const downloadLink = document.getElementById("downloadLink");
        downloadLink.href = canvas.toDataURL("image/png");
      }

      function toggleMute() {
        if (audio.paused) {
          audio.play().catch(() => {});
          document.getElementById("muteBtn").innerText = "üîä";
        } else {
          audio.pause();
          document.getElementById("muteBtn").innerText = "üîá";
        }
      }
      const nameArInput = document.getElementById("nameAr");
      const nameEnInput = document.getElementById("nameEn");
      const generateBtn = document.getElementById("generateBtn");

      function checkInputs() {
        const hasInput =
          nameArInput.value.trim() !== "" || nameEnInput.value.trim() !== "";
        generateBtn.disabled = !hasInput;
      }

      nameArInput.addEventListener("input", () => {
        startAudioOnce();
        checkInputs();
      });

      nameEnInput.addEventListener("input", () => {
        startAudioOnce();
        checkInputs();
      });

      // ŸÑŸÖŸÜÿπ ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ ÿ•ÿ∞ÿß ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿ•ÿØÿÆÿßŸÑ
      function generateCard() {
        if (generateBtn.disabled) return;

        const nameAr = nameArInput.value.trim();
        const nameEn = nameEnInput.value.trim();

        ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#000";
        ctx.textAlign = "center";

        let y = canvas.height - 350;
        if (nameAr) {
          ctx.font = "60px 'ArbFONTS-GE-Flow'";
          ctx.fillText(nameAr, canvas.width / 2, y);
          y += 75;
        }
        if (nameEn) {
          ctx.font = "56px 'FuturaPT'";
          ctx.fillText(nameEn, canvas.width / 2, y);
        }

        const downloadLink = document.getElementById("downloadLink");
        downloadLink.href = canvas.toDataURL("image/png");
      }
    </script>
    <style>
      @font-face {
        font-family: "FuturaPT";
        src: url("https://hnouh.github.io/eid-greeting/futura%20medium%20bt.woff")
          format("woff");
        font-weight: normal;
        font-style: normal;
      }

      @font-face {
        font-family: "ArbFONTS-GE-Flow";
        src: url("https://hnouh.github.io/eid-greeting/ArbFONTS-GE-Flow-Regular.woff")
          format("woff");
        font-weight: normal;
        font-style: normal;
      }

      body {
        text-align: center;
        direction: rtl;
        color: #333;
        margin: 0;
      }
      .bigVontainer {
        background: linear-gradient(to bottom, #f5f0e1);
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 100px;
        width: 100%;
      }
      .sticky-header {
        position: sticky;
        top: 0;
        z-index: 1000;
        background-color: #fdf6ec;
        padding: 15px 10px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      }

      .header-grid {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        align-items: center;
        text-align: center;
        gap: 10px;
      }
      .logo {
        width: 15em;
        height: 4.5em;
        justify-self: start;
      }

      /* header in center*/
      .header-grid h2 {
        font-size: 24px;
        color: #003f5c;
        margin: 0;
        justify-self: center;
      }

      .header-title {
        text-align: center;
        margin-top: 10px;
        display: flex;
        flex-direction: column;
      }

      h2 {
        font-family: "ArbFONTS-GE-Flow", "FuturaPT" !important;

        color: #003f5c;
        font-size: 1.2vw;
        margin: 0;
      }

      p {
        font-family: "ArbFONTS-GE-Flow", "FuturaPT" !important;
        font-size: 1vw;
      }

      input {
        font-family: "ArbFONTS-GE-Flow", "FuturaPT" !important;
        font-size: 1vw;
        padding: 10px;
        width: 80%;
        max-width: 300px;
        border: 2px solid #8b4513;
        border-radius: 10px;
        margin-top: 10px;
      }

      button {
        font-family: "ArbFONTS-GE-Flow", "FuturaPT" !important;
        font-size: 1vw;
        margin-top: 15px;
        padding: 10px 20px;
        background-color: #8b4513;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      button:hover {
        background-color: #a0522d;
      }

      canvas {
        margin-top: 30px;
        border-radius: 15px;
        max-width: 100%;
        height: auto;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }
      #greetingCanvas {
        width: 300px;
        height: 600px;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      }

      #downloadLink {
        display: inline-block;
        margin-top: 20px;
        font-size: 1vw;
        text-decoration: none;
        color: #ffff;
        background-color: #8b4513;
        padding: 10px 20px;
        border-radius: 8px;
        font-family: "ArbFONTS-GE-Flow", "FuturaPT" !important;
      }
      #downloadLink:hover {
        background-color: #a0522d;
      }
      #muteBtn {
        position: absolute;
        top: 10px;
        left: 10px;
        z-index: 2000;
        background-color: #fff;
        border: 2px solid #c89f2d;
        border-radius: 50%;
        font-size: 18px;
        padding: 6px 10px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      }
      /* #muteBtn {
          justify-self: end;
          background-color: #fff;
          border: 2px solid #c89f2d;
          border-radius: 50%;
          font-size: 20px;
          cursor: pointer;
          padding: 6px 10px;
          box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);

          margin-top: 1em;
        } */

      .post-content {
        padding-left: 0px !important;
        padding-right: 0px !important;
      }
      @media screen and (min-width: 768px) and (max-width: 1023px) {
        .bigVontainer {
          gap: 20px;
        }
        p,
        input,
        button,
        #downloadLink {
          font-size: 2vw;
        }
      }

      @media (max-width: 767px) {
        p,
        input,
        button,
        #downloadLink {
          font-size: 5vw;
        }
        .header-grid {
          display: flex;
          flex-direction: row;
          align-items: center;
          justify-content: space-between;
          gap: 10px;
          flex-wrap: wrap;
          padding: 0 10px;
        }
        .header-title {
          flex: 1 1 100%;
          text-align: center;
          margin-top: 10px;
        }

        .header-title h2 {
          font-size: 4.5vw;
          max-width: 90vw;
          margin: 5px auto;
          line-height: 1.5;
        }
        .logo {
          height: 45px;
          max-width: 40%;
        }
        #muteBtn {
          top: -80px;
          left: 80px;
        }
        .bigVontainer {
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          gap: 10px;
        }
      }
    </style>
  </head>
  <body>
    <button id="muteBtn" onclick="toggleMute()">üîä</button>
    <div class="bigVontainer">
      <div class="rightContainer">
        <p></p>
        <p>ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖŸÉ ÿ®ÿßŸÑÿπÿ±ÿ®Ÿä Ÿàÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ÿ®ÿ∑ÿßŸÇÿ© ÿ™ŸáŸÜÿ¶ÿ© ÿÆÿßÿµÿ© ÿ®ŸÉ:</p>
        <input
          type="text"
          id="nameAr"
          placeholder="ŸÖÿ´ÿßŸÑ: ÿ≠ÿ≥ŸÜ ŸÜŸàÿ≠"
          oninput="startAudioOnce()"
        />
        <p></p>
        <p dir="ltr">
          Enter your name to get a personalized Eid greeting card:
        </p>
        <input
          dir="ltr"
          type="text"
          id="nameEn"
          placeholder="e.g. Hasan Nouh"
          oninput="startAudioOnce()"
        />
        <br />
        <button id="generateBtn" onclick="generateCard()" disabled>
          ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ®ÿ∑ÿßŸÇÿ©
        </button>
        <br />
      </div>
      <div class="lefttContainer">
        <canvas id="greetingCanvas" width="1080px" height="1920px"></canvas>
        <br />
        <a id="downloadLink" download="ÿ®ÿ∑ÿßŸÇÿ©_ÿπŸäÿØ_ÿßŸÑÿ≠ÿ¨.png">ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ÿ∑ÿßŸÇÿ©</a>
        <p></p>
      </div>
    </div>

    <audio id="takbeerat" loop>
      <source
        src="https://archive.org/download/eid-takbeerat-haramain/1433.mp3"
        type="audio/mpeg"
      />
      ŸÖÿ™ÿµŸÅÿ≠ŸÉ ŸÑÿß ŸäÿØÿπŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿµŸàÿ™
    </audio>
    
  </body>
</html>
